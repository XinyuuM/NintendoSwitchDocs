<!doctype html>
<html lang="zh-Hans" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">4 篇博文 含有标签「实验」 | alone的博客</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://all-alone.cocomoe.cn/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://all-alone.cocomoe.cn/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://all-alone.cocomoe.cn/tags/实验"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" property="og:title" content="4 篇博文 含有标签「实验」 | alone的博客"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://all-alone.cocomoe.cn/tags/实验"><link data-rh="true" rel="alternate" href="https://all-alone.cocomoe.cn/tags/实验" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://all-alone.cocomoe.cn/tags/实验" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="alone的博客 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="alone的博客 Atom Feed"><link rel="stylesheet" href="/assets/css/styles.676b9aa2.css">
<script src="/assets/js/runtime~main.bfaeb30c.js" defer="defer"></script>
<script src="/assets/js/main.b708ccd4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">alon的博客</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="最近博文导航"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2024/1/17/VLAN 基础配置之配置Trunk 接口">VLAN 基础配置之配置Trunk 接口</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/VLAN 基础配置和配置Access 接口">VLAN 基础配置和配置Access 接口</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/IPv4 静态路由基础实验">IPv4 静态路由基础实验</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2021/1/20/VLAN 基础配置之理解Hybrid 接口">VLAN 基础配置之理解Hybrid 接口</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><header class="margin-bottom--xl"><h1>4 篇博文 含有标签「实验」</h1><a href="/tags">查看所有标签</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="实验介绍"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2024/1/17/VLAN 基础配置之配置Trunk 接口">VLAN 基础配置之配置Trunk 接口</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-01-17T00:00:00.000Z" itemprop="datePublished">2024年1月17日</time> · <!-- -->阅读需 6 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://space.bilibili.com/21977351" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://static.xinyuu.info/static/all-alone.jpg" alt="all-alone" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://space.bilibili.com/21977351" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">all-alone</span></a></div><small class="avatar__subtitle" itemprop="description">Administrator</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="实验介绍">实验介绍<a href="#实验介绍" class="hash-link" aria-label="实验介绍的直接链接" title="实验介绍的直接链接">​</a></h2>
<p>关于本实验的所需要的知识点补充</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="trunk部分">trunk部分<a href="#trunk部分" class="hash-link" aria-label="trunk部分的直接链接" title="trunk部分的直接链接">​</a></h3>
<p>VLAN 传输：trunk 端口可以传输多个 VLAN 的数据。它使用 VLAN 标记协议（如 IEEE 802.1Q）来在数据包中添加 VLAN 标记，以标识数据包属于哪个 VLAN。</p>
<p>配置方式：trunk 端口需要在交换机上进行配置。管理员需要将相应的端口配置为 trunk 端口，并指定所传输的 VLAN 列表。这样交换机才能正确地进行 VLAN 标记和数据转发。</p>
<p>连接交换机：trunk 端口通常用于连接两个交换机之间的接口。通过这样的连接，交换机可以交换多个 VLAN 的数据，并提供灵活性和效率。</p>
<p>数据传输：当数据从一个交换机通过 trunk 端口发送到另一个交换机时，发送端交换机会在数据包的以太网帧中添加 VLAN 标记，以标识数据包所属的 VLAN。接收端交换机会根据 VLAN 标记将数据包转发到相应的 VLAN。</p>
<p>需要注意的是，trunk 端口一般不用于连接终端设备（如计算机或打印机），而是用于连接交换机之间的接口，以实现多个 VLAN 的数据传输。总结起来，trunk 端口是在交换机上配置为传输多个 VLAN 数据的接口。它通过 VLAN 标记协议在数据包中添加 VLAN 标记，并允许交换机之间进行多个 VLAN 的数据传输。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="实验目的">实验目的<a href="#实验目的" class="hash-link" aria-label="实验目的的直接链接" title="实验目的的直接链接">​</a></h3>
<ul>
<li>理解干道链路的应用场景</li>
<li>掌握 Trunk 端口的配置</li>
<li>掌握 Trunk 端口允许所有 VLAN 通过的配置方法</li>
<li>掌握 Trunk 端口允许特定 VLAN 通过的配置方法</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="实验背景">实验背景<a href="#实验背景" class="hash-link" aria-label="实验背景的直接链接" title="实验背景的直接链接">​</a></h3>
<p>本实验模拟某公司网络场景。公司规模较大，员工 200 余名，内部网络是一个大的局域网。公司放置了多台接入交换机 (如 S1 和 S2)负责员工的网络接入。接入交换机之间通过汇聚交换机 S3 相连。公司通过划分 VLAN 来隔离广播域，由于员工较多，相同部门的员工通过不同交换机接入。为了保证在不同交换机下相同部门的员工能互相通信需要配置交换机之间链路为干道模式，以实现相同 VLAN 跨交换机通信。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="实验拓扑">实验拓扑<a href="#实验拓扑" class="hash-link" aria-label="实验拓扑的直接链接" title="实验拓扑的直接链接">​</a></h3>
<p><img loading="lazy" alt="图片" src="/assets/images/1-63507dc103634fdf5773dd919acbc9e1.png" width="852" height="556" class="img_ev3q"></p>
<p><strong>/</strong> 实验任务配置 <strong>/</strong></p>
<p>*<strong>1*</strong></p>
<h2></h2>
<p><strong>IP 地址规划</strong></p>
<table><thead><tr><th>设备</th><th>接口</th><th>IP地址/掩码</th><th>所属vlan</th></tr></thead><tbody><tr><td>PC1</td><td>E0/0/1</td><td>10.1.1.1/24</td><td>10</td></tr><tr><td>PC2</td><td>E0/0/1</td><td>10.1.1.2/24</td><td>20</td></tr><tr><td>PC3</td><td>E0/0/1</td><td>10.1.1.3/24</td><td>10</td></tr><tr><td>PC4</td><td>E0/0/1</td><td>10.1.1.4/24</td><td>20</td></tr></tbody></table>
<p>*<strong>2*</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-1"><a href="#-1" class="hash-link" aria-label="-1的直接链接" title="-1的直接链接">​</a></h2>
<p><strong>基本配置</strong></p>
<p><img loading="lazy" alt="图片" src="/assets/images/2-5250c088f146350f00af31a4c9751140.png" width="781" height="533" class="img_ev3q"></p>
<p><img loading="lazy" alt="图片" src="/assets/images/3-8a856a559bae563ad549491aa9c86b2d.png" width="781" height="533" class="img_ev3q"></p>
<p><strong>其他主机间互相通信测试和上述相同</strong></p>
<p>*<strong>3*</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-2"><a href="#-2" class="hash-link" aria-label="-2的直接链接" title="-2的直接链接">​</a></h2>
<p><strong>创建 vlan</strong></p>
<p>公司内网需要通过VLAN 的划分来隔离不同的部门，需要在3台交换机S1、S2、S3上都分别创建VLAN10和VLAN 20，研发部员工属于VLAN10，市场部员工属于VLAN20。</p>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[s1]vlan batch 10 20[s2]vlan batch 10 20[s3]vlan batch 10 20</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>*<strong>4*</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-3"><a href="#-3" class="hash-link" aria-label="-3的直接链接" title="-3的直接链接">​</a></h2>
<p><strong>配置 access 接口</strong></p>
<p>在S1 上配置E 0/0/2 和E 0/0/3 为Access 接口，并划分到相应的VLAN</p>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[s1-Ethernet0/0/2]port link-type access[s1-Ethernet0/0/2]port default vlan 10[s1-Ethernet0/0/3]port link-type access[s1-Ethernet0/0/3]port default vlan 20</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在S2 上配置E 0/0/3 和E 0/0/4 为Access 接口，并划分到相应的VLAN。</p>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[s2-Ethernet0/0/3]port link-type access[s2-Ethernet0/0/3]port default vlan 10[s2-Ethernet0/0/4]port link-type access[s2-Ethernet0/0/4]port default vlan 20</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>*<strong>5*</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-4"><a href="#-4" class="hash-link" aria-label="-4的直接链接" title="-4的直接链接">​</a></h2>
<p><strong>配置 trunk 接口</strong></p>
<p>为了让交换机间能够识别和发送跨越交换机的VLAN报文，需要将交换机间相连的接口配置成为Trunk接口。配置时要明确被允许通过的VLAN，实现对VLAN流量传输的控制。</p>
<p>在S1上配置E 0/0/1为Trunk 接口，允许VLAN 10 和VLAN20通过</p>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[s1]int eth 0/0/1[s1-Ethernet0/0/1]port link-type trunk[s1-port-group-link-type]port trunk allow-pass  vlan 10 20</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在S2上配置E 0/0/2为Trunk 接口，允许VLAN 10 和VLAN20通过</p>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[s2]int eth 0/0/2[s2-Ethernet0/0/2]port link-type trunk[s2-Ethernet0/0/2]port trunk allow-pass  vlan 10 20</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在S3上配置GE 0/0/1 和GE 0/0/2 为Trunk 接口，允许所有VLAN 通过</p>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[s3]int g 0/0/1[s3-GigabitEthernet0/0/1]port link-type trunk[s3-GigabitEthernet0/0/1]port trunk allow-pass  vlan 10 20[s3-GigabitEthernet0/0/1]int g 0/0/2[s3-GigabitEthernet0/0/2]port link-type trunk[s3-GigabitEthernet0/0/2]port trunk allow-pass vlan 10 20</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>*<strong>5*</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-5"><a href="#-5" class="hash-link" aria-label="-5的直接链接" title="-5的直接链接">​</a></h2>
<p><strong>查看trunk 配置情况</strong></p>
<p><img loading="lazy" alt="图片" src="/assets/images/4-a1719f2c9c27e14e88fb36ed7dd02044.png" width="796" height="124" class="img_ev3q"></p>
<p>*<strong>6*</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-6"><a href="#-6" class="hash-link" aria-label="-6的直接链接" title="-6的直接链接">​</a></h2>
<p><strong>检查配置结果</strong></p>
<p><img loading="lazy" alt="图片" src="/assets/images/5-0bfe1aeeb119760c800d42b37b15ecf1.png" width="781" height="533" class="img_ev3q"></p>
<p><img loading="lazy" alt="图片" src="/assets/images/6-10cb0b929d42ec1d10cebc72863dec2a.png" width="781" height="533" class="img_ev3q"></p>
<p><strong>本文完</strong></p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/vlan">VLAN</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/实验">实验</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/交换机">交换机</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="实验介绍:"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/VLAN 基础配置和配置Access 接口">VLAN 基础配置和配置Access 接口</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-01-15T00:00:00.000Z" itemprop="datePublished">2024年1月15日</time> · <!-- -->阅读需 8 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://space.bilibili.com/21977351" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://static.xinyuu.info/static/all-alone.jpg" alt="all-alone" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://space.bilibili.com/21977351" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">all-alone</span></a></div><small class="avatar__subtitle" itemprop="description">Administrator</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="实验介绍">实验介绍:<a href="#实验介绍" class="hash-link" aria-label="实验介绍:的直接链接" title="实验介绍:的直接链接">​</a></h2>
<p>关于本实验的所需要的知识点补充</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="vlan-部分">vlan 部分<a href="#vlan-部分" class="hash-link" aria-label="vlan 部分的直接链接" title="vlan 部分的直接链接">​</a></h3>
<p>VLAN，全称为 Virtual Local Area Network，是一种虚拟局域网技术。它通过在物理网络上进行逻辑划分，将不同的网络设备分组到不同的虚拟局域网中，实现逻辑上的隔离和独立。</p>
<p>传统的局域网是基于物理连接的，所有设备都连接在同一个物理网络上。而 VLAN 技术允许管理员根据不同的需求和安全策略，将设备划分为不同的逻辑组，即虚拟局域网。这样可以实现不同虚拟局域网之间的隔离，提高网络的可管理性和安全性。</p>
<p>VLAN 可以通过端口、MAC 地址、IP 地址等方式进行划分和管理。在同一个物理网络中，不同的 VLAN 之间可以进行通信或隔离，类似于拆分出了多个独立的逻辑网络。这样可以实现更好的网络资源管理、提高带宽利用率、提供更精细的访问控制和安全策略等。</p>
<p>VLAN 技术广泛应用于企业、机构、数据中心等网络环境中，能够提供更灵活、安全和高效的网络划分和管理。</p>
<p>VLAN ID（VLAN 标识符）是用于 识别和区分不同 VLAN 的数字标识。每个 VLAN 都被分配一个唯一的 VLAN ID，用于在网络设备之间进行识别和通信。</p>
<p>VLAN ID 是一个 12 位的数字，范围从 1 到 4094。其中，VLAN ID 1 和 VLAN ID 4095 有特殊用途，不能用于常规的用户数据流量。通常，管理员根据网络需求和设计，为不同的 VLAN 分配不同的 VLAN ID。</p>
<p>在网络设备（如交换机）的配置中，将每个端口或接口与特定的 VLAN 关联起来，以确定哪些设备属于哪个 VLAN。当数据包进入交换机时，根据数据包的 VLAN ID 来决定将其发送到哪个 VLAN 中的设备。</p>
<p>VLAN ID 在实现虚拟局域网时起到了关键的作用，它允许网络管理员轻松地将设备划分到不同的逻辑网络中，并为每个 VLAN 提供独立的网络环境和服务。通过使用 VLAN ID，不同 VLAN 之间的数据可以在同一物理网络上进行隔离和转发，提供更高的网络灵活性和管理能力。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="access-部分">access 部分<a href="#access-部分" class="hash-link" aria-label="access 部分的直接链接" title="access 部分的直接链接">​</a></h3>
<p>Access 接口是指网络设备（如交换机）上用于连接终端设备的端口或接口。它是用于连接终端设备（如计算机、IP 电话、摄像头等）到网络的物理接口。</p>
<p>在一个交换机上，通常有多个接口，其中一部分被配置为 Access 接口。Access 接口只能属于一个 VLAN，并且只能传输属于该 VLAN 的数据。终端设备连接到 Access 接口时，数据包会被标记上该接口所属的 VLAN ID，交换机会根据这个标记将数据包发送到相应的 VLAN。Access 接口通常连接到终端设备或其他不需要 VLAN 划分的设备。</p>
<p>通过使用 Access 接口，可以实现对不同终端设备的统一管理和控制。可以为每个 Access 接口配置所属的 VLAN，从而实现终端设备的逻辑划分和隔离。这样可以提高网络的安全性、灵活性和可管理性。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="实验目的">实验目的<a href="#实验目的" class="hash-link" aria-label="实验目的的直接链接" title="实验目的的直接链接">​</a></h3>
<ul>
<li>理解 vlan 的应用场景和基本配置</li>
<li>掌握 access 接口的配置和加入相对应的 vlan 的方法</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="实验背景">实验背景<a href="#实验背景" class="hash-link" aria-label="实验背景的直接链接" title="实验背景的直接链接">​</a></h3>
<p>本实验模拟企业网络场景。公司内网是一个大的局域网，二层交换机 S1 放置在一楼，在一楼办公的部门有 IT 部和人事部;二层交换机 S2 放置在二楼，在二楼办公的部门有市场部和研发部。由于交换机组成的是一个广播网，交换机连接的所有主机都能互相通信，而公司策略是:不同部门之间的主机不能互相通信，同一部门内的主机才可以互相访问。因此需要在交换机上划分不同的 VLAN，并将连接主机的交换机接口配置成 Access 接口划分到相应 VLAN 内。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="实验拓扑">实验拓扑<a href="#实验拓扑" class="hash-link" aria-label="实验拓扑的直接链接" title="实验拓扑的直接链接">​</a></h3>
<p><img loading="lazy" alt="图片" src="/assets/images/1-54e0b4f0a3cdb1278bc5963ae58bd2c6.png" width="829" height="625" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="实验任务配置">实验任务配置<a href="#实验任务配置" class="hash-link" aria-label="实验任务配置的直接链接" title="实验任务配置的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ip-地址规划">IP 地址规划<a href="#ip-地址规划" class="hash-link" aria-label="IP 地址规划的直接链接" title="IP 地址规划的直接链接">​</a></h3>
<table><thead><tr><th>设备</th><th>接口</th><th>IP地址/掩码</th><th>所属vlan</th></tr></thead><tbody><tr><td>PC1</td><td>E0/0/1</td><td>10.1.1.1/24</td><td>10</td></tr><tr><td>PC2</td><td>E0/0/1</td><td>10.1.1.2/24</td><td>10</td></tr><tr><td>PC3</td><td>E0/0/1</td><td>10.1.1.3/24</td><td>20</td></tr><tr><td>PC4</td><td>E0/0/1</td><td>10.1.1.4/24</td><td>30</td></tr><tr><td>PC5</td><td>E0/0/1</td><td>10.1.1.5/24</td><td>40</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="基本配置">基本配置<a href="#基本配置" class="hash-link" aria-label="基本配置的直接链接" title="基本配置的直接链接">​</a></h3>
<p><img loading="lazy" alt="图片" src="/assets/images/2-2c0b143b64df4394545aac3dde07f980.png" width="781" height="533" class="img_ev3q">
<img loading="lazy" alt="图片" src="/assets/images/3-fe71adc9b1c1b3e5c536754bcc81d32f.png" width="781" height="533" class="img_ev3q">
其他主机间互相通信测试和上述相同，略过。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="创建-vlan">创建 vlan<a href="#创建-vlan" class="hash-link" aria-label="创建 vlan的直接链接" title="创建 vlan的直接链接">​</a></h3>
<p>默认自带 vlan1，其余 vlan 需要命令手工创建，有两个办法⼀种是使⽤vlan 命令创建单个，另一种是用 vlan batch 命令创建多个
<img loading="lazy" alt="图片" src="data:image/png;base64,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" width="208" height="161" class="img_ev3q">
配置完成后可以使用 display vlan 查看 vlan 信息
<img loading="lazy" alt="图片" src="/assets/images/5-850e4750cae7e02d0ffc537ca9e018e0.png" width="1080" height="633" class="img_ev3q">
<img loading="lazy" alt="图片" src="/assets/images/6-5414a5d567b942730a3ea9b70b4701ba.png" width="1080" height="555" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="配置-access-接口">配置 access 接口<a href="#配置-access-接口" class="hash-link" aria-label="配置 access 接口的直接链接" title="配置 access 接口的直接链接">​</a></h3>
<p>按照我给出的拓扑，使用 port link-type access 命令，连接 PC（终端）的接口为 access 类型接口，并使用 port default vlan 命令来加入相应的 vlan 中
默认情况下，所有接口默认是 vlan 1
<img loading="lazy" alt="图片" src="/assets/images/7-5752a8dd5c6126de25c916fc5c215653.png" width="374" height="491" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="配置完成后可以查看-s1-和-s2-上的-vlan-信息">配置完成后可以查看 S1 和 S2 上的 vlan 信息<a href="#配置完成后可以查看-s1-和-s2-上的-vlan-信息" class="hash-link" aria-label="配置完成后可以查看 S1 和 S2 上的 vlan 信息的直接链接" title="配置完成后可以查看 S1 和 S2 上的 vlan 信息的直接链接">​</a></h3>
<p><img loading="lazy" alt="图片" src="/assets/images/8-2e02af00bd1e9bb362eab836eaa03c28.png" width="1080" height="644" class="img_ev3q">
<img loading="lazy" alt="图片" src="/assets/images/9-0efaddbbc96e7c8383203a9f9dc2fadd.png" width="1080" height="675" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="检查配置结果">检查配置结果<a href="#检查配置结果" class="hash-link" aria-label="检查配置结果的直接链接" title="检查配置结果的直接链接">​</a></h2>
<p><img loading="lazy" alt="图片" src="/assets/images/10-8aba8d0d7263a98898c4539401f6ceb6.png" width="781" height="533" class="img_ev3q"></p>
<p>在交换机上将不同接口加入各自不同的 VLAN 中后，属于相同 VLAN 的接口处于同一个广播域，相互之间可以直接通信。属于不同 VLAN 的接口是处于不同的广播域，相互之间不能直接通信。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/vlan">VLAN</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/实验">实验</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/交换机">交换机</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="实验介绍:"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/IPv4 静态路由基础实验">IPv4 静态路由基础实验</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-01-14T00:00:00.000Z" itemprop="datePublished">2024年1月14日</time> · <!-- -->阅读需 12 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://space.bilibili.com/21977351" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://static.xinyuu.info/static/all-alone.jpg" alt="all-alone" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://space.bilibili.com/21977351" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">all-alone</span></a></div><small class="avatar__subtitle" itemprop="description">Administrator</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><strong>实验介绍:</strong></p>
<p>关于本实验的所需要的知识点补充</p>
<p><strong>IPV4知识部分：</strong></p>
<p>IPv4（Internet Protocol version 4）是互联网协议第四个版本，是目前广泛使用的IP协议的主要版本之一。IPv4使用32位地址空间，通常以点分十进制表示（例如，192.168.0.1），用于标识计算机、设备或网络在互联网中的唯一位置。</p>
<p>IPv4定义了互联网上计算机之间进行数据传输的规则和格式。它提供了分组交换、分组路由和数据包传递等核心功能，通过将数据分割为小的数据包（也称为IP数据包）并在网络中传递，使得数据能够在全球范围内进行传输和交换。</p>
<p>IPv4地址由四个8位字段组成，每个字段的值在0到255之间。这些字段被称为IPv4地址的四个八位组或四个八位字节，例如192.168.0.1。IPv4地址的结构可以表示为“A.B.C.D”，其中A、B、C和D分别表示四个八位字段。</p>
<p>然而，由于IPv4只提供了有限的32位地址空间，随着互联网的发展和设备的增加，IPv4地址已经逐渐不足。为了解决这个问题，IPv6（Internet Protocol version 6）作为IPv4的继任者被开发出来，提供了128位的地址空间，以支持更多的设备连接到互联网。尽管如此，IPv4仍然广泛使用，并且在许多网络中仍然是主要的IP版本。</p>
<p><strong>路由知识部分：</strong></p>
<p>路由是指在计算机网络中将数据包从源地址传输到目标地址的过程。它涉及将数据包从一个网络节点（或者称为路由器、交换机）转发到下一个网络节点的决策和操作。路由是网络中实现数据传输的核心机制之一。</p>
<p>简单来说，路由器是网络中的设备，负责根据特定的路由选择算法，根据目标地址来选择最佳路径，将数据包从源节点转发到目标节点。路由器通过查看数据包中的目标IP地址，并与路由表中的条目进行匹配，以确定下一个跳的 目标地址，并将数据包转发到下一跳。这个过程可能涉及多个路由器的协作，直到数据包到达目标地址。</p>
<p>路由的目的是为了实现数据包的高效传输和网络资源的优化利用。通过选择最佳路径，路由可以减少数据包在网络中的传输延迟、减少网络拥塞，并确保数据包按照正确的顺序到达目标节点。</p>
<p>路由基于网络中的路由表来进行决策，路由表中存储了网络拓扑和路由信息。路由表可以手动配置，也可以通过路由协议（如OSPF、BGP等）自动学习和更新。路由表中的每一条目都包含目标网络的IP前缀、下一跳地址、出接口等信息，用于指导数据包的转发。</p>
<p>总结起来，路由是网络中将数据包从源地址传输到目标地址的过程，它通过路由器根据目标地址选择最佳路径来实现。它对于网络的性能和可靠性至关重要，并且是实现互联网通信的关键技术之一。</p>
<p><strong>静态路由部分：</strong></p>
<p>静态路由是一种手动配置的路由方式，根据管理员预先定义的路由条目，将数据包从源地址传递到目标地址。与动态路由协议不同，静态路由不会自动学习和更新路由表，而是需要管理员手动配置和维护路由表。</p>
<p>在静态路由中，管理员手动配置每个目标网络的路由信息，包括目标网络的IP前缀、下一跳地址和出接口。当数据包到达路由器时，路由器会根据目标IP地址匹配静态路由表中的路由条目，并将数据包转发到指定的下一跳路由器或目标网络。</p>
<p>静态路由的优点是简单和可靠。它不需要协议的运行支持，不会消耗额外的网络带宽和处理能力。由于路由表是手动配置的，管理员可以精确地控制数据包的路径，并且不容易受到网络变化和故障的影响。</p>
<p>然而，静态路由也有一些限制和缺点。首先，静态路由不适用于大型 复杂的网络环境，因为手动配置和维护路由表可能变得繁琐和容易出错。其次，静态路由缺乏动态适应网络变化的能力，当网络拓扑发生变化时，管理员需要手动更新静态路由表以适应变化。</p>
<p>因此，静态路由通常适用于小型网络环境或特定需求的场景，如连接几个子网或连接到其他网络的边缘路由器。在大型网络中，通常使用动态路由协议来自动学习和更新路由表，以应对复杂的网络拓扑和变化。</p>
<p><strong>LoopBack接口</strong></p>
<p>Loopback接口是计算机网络中的一种虚拟网络接口，也被称为环回接口或本地回环接口。它是操作系统提供的一种特殊接口，用于在本地主机上进行网络通信测试和故障排除。</p>
<p>Loopback接口的特点是它不连接到任何物理设备或网络，而是将数据包直接发送给自身，模拟了网络通信的过程。当应用程序发送数据包到Loopback地址（通常是127.0.0.1）时，操作系统将数据包传递给Loopback接口，接口将数据包立即传递回应用程序，就像数据包通过实际网络传输后再返回一样。</p>
<p>Loopback接口的主要用途有：</p>
<ol>
<li>网络测试和诊断：通过将数据包发送到Loopback地址，可以测试本地网络协议的功能和性能。例如，可以通过Ping命令测试本地主机的连通性或通过发送数据包来测试特定的网络服务。</li>
<li>本地开发和调试：在开发和调试网络应用程序时，Loopback接口可以模拟网络通信，无需实际的网络连接。这样可以方便地测试和验证应用程序的功能。</li>
<li>安全和隔离：某些应用程序可能需要在本地主机上运行，但不希望与实际的网络进行通信。使用Loopback接口可以实现应用程序的隔离和安全，确保它们只在本地运行。</li>
</ol>
<p>总之，Loopback接口是计算机网络中的虚拟接口，用于在本地主机上进行网络通信 的测试、诊断和开发。它提供了一种方便和安全的方式来模拟网络通信，而无需实际的网络连接。</p>
<p><strong>本实验使用LoopBack接口模拟客户端。</strong></p>
<p><strong>实验目的:</strong></p>
<ol>
<li>
<p>掌握接口 IPv4 地址的配置方法</p>
</li>
<li>
<p>掌握静态路由的配置方法并理解其生效的条件</p>
</li>
<li>
<p>了解loopback接口配置</p>
</li>
</ol>
<p><em><strong>*实验拓扑:*</strong></em></p>
<p><img loading="lazy" alt="图片" src="/assets/images/拓扑-5869c2e58279deab2696faf61547682b.PNG" width="631" height="458" class="img_ev3q"></p>
<p><strong>实验任务配置:</strong></p>
<p><strong>配置思路</strong></p>
<ol>
<li>
<p>配置路由器上各接口的 IP 地址</p>
</li>
<li>
<p>配置静态路由来实现互联互通</p>
<p>按照下表配置路由器的接口的 IP 地址</p>
</li>
</ol>
<table><thead><tr><th>路由器</th><th>接口</th><th>IP地址/掩码</th></tr></thead><tbody><tr><td>R1</td><td>GE0/0/0</td><td>10.0.12.1/24</td></tr><tr><td>GE0/0/1</td><td>10.0.13.1/24</td><td></td></tr><tr><td>LoopBack0</td><td>10.0.1.1/32</td><td></td></tr><tr><td>R2</td><td>GE0/0/0</td><td>10.0.12.2/24</td></tr><tr><td>GE0/0/2</td><td>10.0.23.2/24</td><td></td></tr><tr><td>LoopBack0</td><td>10.0.1.2/32</td><td></td></tr><tr><td>R3</td><td>GE0/0/1</td><td>10.0.13.3/24</td></tr><tr><td>GE0/0/2</td><td>10.0.23.3/24</td><td></td></tr><tr><td>LoopBack0</td><td>10.0.1.3/32</td><td></td></tr></tbody></table>
<p><strong>配置命令</strong></p>
<p><strong>配置IP地址方法</strong></p>
<p>**ip add 地址 掩码
**</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;R1&gt;system-view</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R1]interface GigabitEthernet0/0/1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R1-GigabitEthernet0/0/1]ip address 10.0.13.1 24 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R1-GigabitEthernet0/0/1]quit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R1]interface GigabitEthernet0/0/0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R1-GigabitEthernet0/0/0]ip address 10.0.12.1 24 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R1-GigabitEthernet0/0/0]quit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R1]interface LoopBack0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R1-LoopBack0]ip address 10.0.0.1 32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;R2&gt;system-view</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R2]interface GigabitEthernet0/0/0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R2-GigabitEthernet0/0/0]ip address 10.0.12.2 24 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R2-GigabitEthernet0/0/0]quit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R2]interface GigabitEthernet0/0/2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R2-GigabitEthernet0/0/2]ip address 10.0.23.2 24 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R2-GigabitEthernet0/0/2]quit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R2]interface LoopBack0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R2-LoopBack0]ip address 10.0.1.2 32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;R3&gt;system-view</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R3]interface GigabitEthernet0/0/1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R3-GigabitEthernet0/0/1]ip address 10.0.13.3 24 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R3-GigabitEthernet0/0/1]quit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R3]interface GigabitEthernet0/0/2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R3-GigabitEthernet0/0/2]ip address 10.0.23.3 24 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R3-GigabitEthernet0/0/2]quit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R3]interface LoopBack0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[R3-LoopBack0]ip address 10.0.1.3 32</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>使用 ping 工具测试联通性</strong></p>
<p><img loading="lazy" alt="图片" src="/assets/images/2-9625c3498b2b8373931a1cb0483e913b.PNG" width="876" height="386" class="img_ev3q"></p>
<p><img loading="lazy" alt="图片" src="/assets/images/3-ba0e93cba9cbb8a830513e8eeb337f10.PNG" width="892" height="350" class="img_ev3q"></p>
<p><strong>查看 R1 的路由表</strong></p>
<p><img loading="lazy" alt="图片" src="/assets/images/4-a88a26ce399c0ee5a0e62dbebecd0678.PNG" width="1080" height="626" class="img_ev3q"></p>
<p>可以看到，在接口IP地址配置完成之后，针对每个接口自动生成了三条直连路由。分别是： 指向接口所在网段的路由和指向接口IP地址的主机路由</p>
<p><strong>配置静态路由</strong></p>
<p><strong>静态路由配置方法</strong></p>
<p><strong>ip route-static 目标网段+子网掩码+下一跳地址</strong></p>
<p>[R1]ip route-static 10.0.1.2 32 10.0.12.2</p>
<p>[R1]ip route-static 10.0.1.3 32 10.0.13.3</p>
<p>[R2]ip route-static 10.0.1.1 32 10.0.12.1</p>
<p>[R2]ip route-static 10.0.1.3 32 10.0.23.3</p>
<p>[R3]ip route-static 10.0.1.1 32 10.0.13.1</p>
<p>[R3]ip route-static 10.0.1.2 32 10.0.23.2</p>
<p><strong>测试联通性</strong></p>
<p><img loading="lazy" alt="图片" src="/assets/images/5-b3f0472ed8d3f2bf0876dd1444d13af9.PNG" width="953" height="688" class="img_ev3q"></p>
<p>读者自行测试路由器的 LoopBack0 接口之间的联通性</p>
<p><strong>配置 R1-&gt;R3-&gt;R2 作为 R1 的 LoopBack0 到 R2 的 LoopBack0 接口的备份路径 # 配置 R1 和 R2 上的静态路由</strong></p>
<p>[R1]ip route-static 10.0.1.2 32 10.0.13.3 preference 100</p>
<p>[R2]ip route-static 10.0.1.1 32 10.0.23.3 preference 100</p>
<p><strong>查看 R1 和 R2 上的路由表</strong></p>
<p><img loading="lazy" alt="图片" src="/assets/images/6-8367c619d14cbec7e6e730824ff0842e.PNG" width="1080" height="659" class="img_ev3q"></p>
<p><img loading="lazy" alt="图片" src="/assets/images/7-4f1c3788482c45cd2c902b12a3ea563f.PNG" width="1080" height="662" class="img_ev3q"></p>
<p>此时配置的 preference 为 100 的静态路由没有被加载到路由表中如果需要显示100的路由，则需要关闭接口，随着高优先级路由失效，低优先级路由被激活</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/静态路由">静态路由</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/实验">实验</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="关于本实验的所需要的知识点补充"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2021/1/20/VLAN 基础配置之理解Hybrid 接口">VLAN 基础配置之理解Hybrid 接口</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-01-20T00:00:00.000Z" itemprop="datePublished">2021年1月20日</time> · <!-- -->阅读需 9 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://space.bilibili.com/21977351" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://static.xinyuu.info/static/all-alone.jpg" alt="all-alone" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://space.bilibili.com/21977351" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">all-alone</span></a></div><small class="avatar__subtitle" itemprop="description">Administrator</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>关于本实验的所需要的知识点补充</p>
<p><em><strong>*hybrid*</strong></em> <strong>部分</strong></p>
<p>在华为交换机中，Hybrid 接口通常指的是支持同时传输多种不同协议或介质的接口。它是指在单个接口上可以同时支持不同类型的数据传输，比如同时支持以太网和光纤通信。</p>
<p>具体来说，在华为交换机中的 Hybrid 接口一般是指具备多种物理接口和传输方式的端口。这些接口可以同时支持不同速率、不同类型的数据传输，例如同时支持 Ethernet（以太网）和 Fiber Channel（光纤通道）的数据传输。</p>
<p>Hybrid 接口的设计使得华为交换机可以更灵活地适应各种网络需求，并提供更多样化的连接选项。通过配置 Hybrid 接口，网络管理员可以根据实际需求选择不同的物理介质和协议，以满足不同设备和应用之间的连接要求。</p>
<p>需要注意的是，Hybrid 接口的具体配置和功能可以因不同的华为交换机型号和软件版本而有所不同。因此，如果在具体的华为交换机设备上使用 Hybrid 接口，建议参考相应的设备文档或联系华为技术支持获取更准确和详细的信息。</p>
<p>在华为交换机中，Hybrid 接口具有以下作用：</p>
<blockquote>
<ol>
<li>
<p>多协议支持：Hybrid 接口可以同时支持多种不同的协议，如以太网、光纤通道（Fiber Channel）等。这样可以满足网络中的不同设备和应用之间的协议要求，实现灵活的数据传输。</p>
</li>
<li>
<p>多介质支持：Hybrid 接口可以同时支持不同的物理介质，如 RJ-45（铜缆）和光纤等。这样可以适应不同的网络环境和需求，实现灵活的网络连接。</p>
</li>
<li>
<p>弹性配置：通过配置 Hybrid 接口，可以根据实际需求选择合适的协议和介质，并灵活调整接口参数。这样可以根据网络的变化和要求来优化和调整接口的配置。</p>
</li>
<li>
<p>提高网络利用率：Hybrid 接口的多协议和多介质支持，使得网络设备可以更有效地利用资源。例如，可以通过 Hybrid 接口将不同类型的设备连接到同一个交换机上，从而简化网络拓扑结构，提高网络资源的利用效率。</p>
</li>
</ol>
</blockquote>
<p>总之，Hybrid 接口在华为交换机中的作用是为了提供更灵活、可扩展和兼容的网络连接选项，以满足不同设备和应用之间的协议和介质要求，并提高网络资源的利用效率。</p>
<p><strong>/</strong> 实验目的 <strong>/</strong></p>
<ul>
<li>掌握配置Hybrid 接口的方法</li>
<li>理解Hybrid 接口处理Untagged 数据帧过程</li>
<li>理解Hybrid 接口处理Tagged 数据帧过程</li>
<li>理解Hybrid 接口的应用场景</li>
</ul>
<p><strong>/</strong> 实验背景 <strong>/</strong></p>
<p>某企业二层网络使用两台 S3700 交换机 S1 和 S2，且两台设备在不同的楼层。网络管理员规划了 3 个不同 VLAN，HR 部门使用 VLAN10，市场部门使用 VLAN 20，IT 部门使用 VLAN30。现在需要让处于不同楼层的 HR 部门和市场部门实现部门内部通信，而两部门之间不允许互相通信;IT 部门可以访问任意部门。可以通过配置 Hybrid 接口来实现较复杂的 VLAN 控制。</p>
<p><strong>/</strong> 实验拓扑 <strong>/</strong></p>
<p><img loading="lazy" alt="图片" src="/assets/images/1-28def0a1ffd84043838c970c994615b1.png" width="716" height="553" class="img_ev3q"></p>
<p><strong>/</strong> 实验任务配置 <strong>/</strong></p>
<p><strong>IP 地址规划</strong></p>
<table><thead><tr><th>设备</th><th>接口</th><th>地址</th><th>vlan</th></tr></thead><tbody><tr><td>PC1</td><td>E0/0/1</td><td>192.168.1.1</td><td>20</td></tr><tr><td>PC2</td><td>E0/0/1</td><td>192.168.1.2</td><td>10</td></tr><tr><td>PC3</td><td>E0/0/1</td><td>192.168.1.3</td><td>20</td></tr><tr><td>PC4</td><td>E0/0/1</td><td>192.168.1.4</td><td>10</td></tr><tr><td>PC5</td><td>E0/0/1</td><td>192.168.1.100</td><td>30</td></tr></tbody></table>
<p><strong>基本配置</strong></p>
<p><img loading="lazy" alt="图片" src="/assets/images/2-49235d8ce6008978e3d00fae267a3099.png" width="781" height="533" class="img_ev3q"></p>
<p><img loading="lazy" alt="图片" src="/assets/images/3-20e7b010ba93afb242dbed06de6be3af.png" width="781" height="533" class="img_ev3q"></p>
<p><em><strong>*其他主机间互相通信测试和上述相同*</strong></em></p>
<p><strong>创建 vlan</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[s1]vlan batch 10 20 30[s2]vlan batch 10 20 30</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>配置 hybrid</strong></p>
<p>因为ensp接口类型默认是hybrid，下面我会提供的一些命令参考</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">port link-type hybrid</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>接口类型改为hybrid</p>
<p>S1的配置</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[s1]int Eth 0/0/1[S1-Ethernet0/0/1]port hybrid tagged vlan 10 20[s1]int Eth 0/0/2[S1-Ethernet0/0/2]port hybrid untagged vlan 20[S1-Ethernet0/0/2]port hybrid pvid vlan 20[s1]int Eth 0/0/3[S1-Ethernet0/0/3]port hybrid untagged vlan 10[S1-Ethernet0/0/3]port hybrid pvid vlan 10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>S2的配置</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[S2]int Eth 0/0/1[S2-Ethernet0/0/1]port hybrid tagged vlan 10 20[s2]int Eth 0/0/2[S2-Ethernet0/0/2]port hybrid untagged vlan 20[S2-Ethernet0/0/2]port hybrid pvid vlan 20[S2]int Eth 0/0/3[S2-Ethernet0/0/3]port hybrid untagged vlan 10[S2-Ethernet0/0/3]port hybrid pvid vlan 10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>配置完成后，使用display vlan命令 查看使用Hybrid配置下接口和VLAN的对应关系。</p>
<p><img loading="lazy" alt="图片" src="/assets/images/4-76049321c22373491680702bd9b6f654.png" width="1080" height="770" class="img_ev3q"></p>
<p><img loading="lazy" alt="图片" src="/assets/images/5-ffd1d330accfb2490824e67913f6d544.png" width="1080" height="768" class="img_ev3q"></p>
<p>*<strong>5*</strong></p>
<h2></h2>
<p>**延伸部分
**</p>
<p>实现网管员对所有网络的访问在实现各部门内部终端可以互相访问，不同部门间的终端隔离访问后，要求网络管理员所在的 I 部门(使用终端 PC-5)能够实现对所有部门的访问。即要求实现 VLAN 30 访问 VLAN10 和 VLAN 20，VLAN 10 和 VLAN 20 之间仍然不允许互相访问。如果 S1 的 E 0/0/2 接口仍是 Access 类型且属于 VLAN10，则不能被其他 VLAN 访问。若要 VLAN 30 的终端能访问 VLAN 10 的终端，则需要修改接口的配置，使其既能被 VLAN 10 访问，又能被 VLAN 30 访问，这就要求此接口同时要属于多个 VLAN，且端口所连设备是 PC，不能识别带 VLAN Tag 的帧，故此时只能使用 Hybrid 类型接口。Hybrid 端口既能被加入多个 VLAN 中，又能够在将其余 VLAN 的帧转发到此接口时，剥离掉相应的 VLAN Tag。</p>
<p>S1的配置</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[S1]int Eth 0/0/4[S1-Ethernet0/0/4]port hybrid pvid vlan 30[S1-Ethernet0/0/4]port hybrid untagged vlan 10 20 30[S1]int Eth 0/0/2[S1-Ethernet0/0/2]port hybrid untagged vlan 20 30[S1]int Eth 0/0/3[S1-Ethernet0/0/3]port hybrid untagged vlan 10 30[S1]int Eth 0/0/1[S1-Ethernet0/0/1]port hybrid tagged vlan 10 20 30</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>S2的配置</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[S2]int Eth 0/0/1[S2-Ethernet0/0/1]port hybrid tagged vlan 10 20 30[S2]int Eth 0/0/2[S2-Ethernet0/0/2]port hybrid untagged vlan 20 30[S2]int Eth 0/0/3[S2-Ethernet0/0/3]port hybrid untagged vlan 10 30</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>结果验证</strong></p>
<p><img loading="lazy" alt="图片" src="/assets/images/6-17fe2c8587cbdd0b462451ef9462fca5.png" width="781" height="533" class="img_ev3q"></p>
<p><img loading="lazy" alt="图片" src="/assets/images/7-4d33ea464595748aa64fd486c1773a9d.png" width="781" height="533" class="img_ev3q"></p>
<p><img loading="lazy" alt="图片" src="/assets/images/8-ce79268bec1e1ebd9f0f4104af4443e3.png" width="781" height="533" class="img_ev3q"></p>
<p>在交换机上可以定义多个 VLAN，每个 VLAN 都可以看做是一个广播域，通常情况下每个 VLAN 都会分配一个独立的 IP 网络，根据需要把相应主机所在的接口划入到指定的 VLAN 中，并配置相应的网络 IP 地址，VLAN 间通过路由来实现互相访问。这是较为常用的方法。但是相比于基于端口的 Hybrid 配置，三层路由方式则不够灵活，原因在于 VLAN 之间的访问控制要借助于路由设备来实现。而控制 VLAN 访问使用 Hybrid 接口则极大地简化了配置的复杂性，它仅需在端口上自主定义基于 VLAN Tag 的过滤规则，来决定指定的 VLAN 的二层帧是否允许发送;它是通过二层来实现 VLAN 间的访问控制，既不需要每个 VLAN 定义单独的 IP 网段，更不需要在 VLAN 间引入路由设备，配置更为灵活方便。</p>
<p><strong>本文完</strong></p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/vlan">VLAN</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/实验">实验</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/交换机">交换机</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="博文列表分页导航"></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">服务</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://status.cocomoe.cn" target="_blank" rel="noopener noreferrer" class="footer__link-item">Coco巡查姬<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">联系方式</div><ul class="footer__items clean-list"></ul></div><div class="col footer__col"><div class="footer__title">文档许可</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://creativecommons.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Creativecommons<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans" target="_blank" rel="noopener noreferrer" class="footer__link-item">署名-非商业性-相同方式共享<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">备案信息</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://icp.gov.moe/?keyword=20242444" target="_blank" rel="noopener noreferrer" class="footer__link-item">萌ICP备20242444号<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 allalone</div></div></div></footer></div>
</body>
</html>